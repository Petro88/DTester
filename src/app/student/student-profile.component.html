<div class="entity-container">
    <div class="student-profile-title">ПРОФІЛЬ СТУДЕНТА
        <button type="button" class="btn btn-default position-left"
                (click)="goBack()">Назад
        </button>
    </div>
    <form #myform="ngForm" novalidate>
        <div class="student-datas row">
                <div class="input-foto student-foto col-xs-12 col-sm-3 col-md-3">
                    <img class="img-responsive img-rounded profile-foto" [src]="student.photo" alt="Фото студента"
                         id="output" #newFotoSrc />
                    <input type="file" name="file" (change)="changeFile($event)" [disabled]="statusView" ngModel>
                </div>

            <div class="student-data1 col-xs-12 col-sm-4 col-md-4">
                <div class="form-field"><label for="surname">Прізвище:</label><input id="surname" name="surname" class="input-student-data "
                                                                  [disabled]="statusView"
                                                                  [(ngModel)]="student.student_surname" required
                                                                  #surname="ngModel" minlength="2" maxlength="20" pattern="[ЇїІіА-Яа-яҐ-ґ]+" ngModel>
                <div *ngIf="surname.errors?.pattern" class="field-error-message">
                    <span>Тільки літери укр.алфавіту</span>
                </div>
                </div>
                <div><label for="name">Ім'я:</label><input id="name" class="input-student-data" name="name"
                                                           [disabled]="statusView"
                                                           [(ngModel)]="student.student_name" #name="ngModel" maxlength="20" pattern="[ЇїІіА-Яа-яҐ-ґ]+"
                                                           required>
                    <div *ngIf="name?.errors?.pattern" class="field-error-message">
                        <span>Тільки літери укр.алфавіту</span>
                    </div>
                    <div *ngIf="name?.errors?.required && (name.dirty || name.touched)" class="field-error-message">
                        <span>Обов'язкове поле</span>
                    </div>
                </div>
                <div><label for="fname">По-батькові:</label><input id="fname" class="input-student-data" name="fname"
                                                                   [disabled]="statusView"
                                                                   [(ngModel)]="student.student_fname" #fname="ngModel" maxlength="20" pattern="[ЇїІіА-Яа-яҐ-ґ]+"
                                                                   required>
                    <div *ngIf="fname?.errors?.pattern" class="field-error-message">
                        <span>Тільки літери укр.алфавіту</span>
                    </div>
                    <div *ngIf="fname?.errors?.required && (fname.dirty || fname.touched)" class="field-error-message">
                        <span>Обов'язкове поле</span>
                    </div>
                </div>
                <div><label for="faculty">Факультет:</label>
                        <select *ngIf ="facultys" id="faculty" class="input-student-data select-group" name="faculty" required [disabled]="statusView" [(ngModel)]="student.faculty_id" #faculty="ngModel" (change)="getGroupByFaculty(faculty.value)" ngModel>
                            <option *ngFor="let item of facultys" class="input-student-data" [value]="item.faculty_id" [selected]="item.faculty_id == student.faculty_id" >
                                {{item.faculty_name}}
                            </option>
                        </select>
                    <div *ngIf="faculty?.errors?.required && (faculty.dirty || faculty.touched)" class="field-error-message">
                        <span>Обов'язкове поле</span>
                    </div>
                    </div>

                    <div><label for="group">Група:</label>
                        <select id="group" class="input-student-data select-group" name="group" [(ngModel)]="student.group_id" #group  (input)="studGroupId(group.value)"
                                required [disabled]="statusView">
                            <option *ngFor="let item of groups" class="input-student-data" [value]="item.group_id" [selected]="item.group_id == student.group_id">
                                {{item.group_name}}
                            </option>
                        </select>
                        </div>
                </div>
            <div class="student-data2 col-xs-12 col-sm-5 col-md-5">
                <div><label for="login">Логін:</label><input id="login" class="input-student-data" name="login"
                                                             [(ngModel)]="student.username" [disabled]="statusView"
                                                             ngModel minlength="4" maxlength="20" pattern="[A-Za-z0-9]+"
                                                             required></div>
                <div><label for="password">Пароль:</label><input id="password"
                                                                 class="input-student-data password-eye-input"
                                                                 name="password"
                                                                 [type]="passwordStatusText"
                                                                 [(ngModel)]="student.plain_password" ngModel minlength="4" maxlength="20"
                                                                 [disabled]="statusView"
                                                                 required>
                       <span class="glyphicon glyphicon-eye-open password-eye" (click)="showPassword()"></span>
                    </div>

                    <div><label for="gradebook_id">№ залікової книжки:</label><input id="gradebook_id"
                                                                                     class="input-student-data" name="gradebook"
                                                                                     [(ngModel)]="student.gradebook_id" ngModel maxlength="20" pattern="[ЇїІіА-Яа-яҐ-ґA-Za-z0-9-]+"
                                                                                     [disabled]="statusView" required></div>
                    <div><label for="email" required>Електронна адреса:</label><input id="email" class="input-student-data" name="email" minlength="6" maxlength="20"
                                                                                      [(ngModel)]="student.email" ngModel
                                                                                      [disabled]="statusView" required>
                    </div>
                </div>
            <div class="button-create-refresh">
                <button *ngIf="!action" class="btn btn-default" type="submit" (click)="editSaveStudentProfile()" role="button">
                {{editSaveButtonName}}
            </button>
                <button *ngIf="!action" class="btn btn-default" type="submit" (click) = deleteStudent() role="button">Видалити студента</button>
                <button *ngIf="action" class="btn btn-default" type="submit" (click)="createNewStudent()" role="button" [disabled]="!myform.valid">Зберегти дані</button>
                <button *ngIf="action" class="btn btn-default" type="submit" (click)="newStudent()" role="button">Очистити форму</button>
            </div>
        </div>
    </form>

    <div *ngIf="!action" class="student-profile-title">
        <ngbd-tabset-tests
            [groupName] = "student.group_name"
            [groupId] = "student.group_id">
        </ngbd-tabset-tests>
    </div>
</div>



 <div>
    <h3>Form:</h3>
    {{myform.value | json}}
    <h3>Student:</h3>
    {{myform.valid | json}}
    <h3>Student:</h3>
    {{student | json}}
</div>

<template ngbModalContainer></template>